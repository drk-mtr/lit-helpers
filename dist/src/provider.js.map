{"version":3,"file":"provider.js","sourceRoot":"","sources":["../../src/provider.ts"],"names":[],"mappings":"AAOA,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAoC,UAAa,EAAE,EAAE;IAC3E,MAAM,aAAc,SAAQ,UAAU;QAAtC;;YACE,eAAU,GAAG,IAAI,GAAG,EAAe,CAAC;QAoBtC,CAAC;QAlBC,iBAAiB;YACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,0BAA0B,EAAE,CAAC;QACpC,CAAC;QAEO,0BAA0B;YAChC,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,CAAC,KAAU,EAAE,EAAE;gBACvD,MAAM,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC;gBAC7B,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;oBAC5B,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjD,KAAK,CAAC,eAAe,EAAE,CAAC;iBACzB;YACH,CAAC,CAAC,CAAC;QACL,CAAC;QAED,eAAe,CAAC,GAAW,EAAE,QAAa;YACxC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;QACrC,CAAC;KACF;IAAA,CAAC;IAEF,OAAO,aAAmD,CAAC;AAC7D,CAAC,CAAA","sourcesContent":["import { LitElement } from \"lit\";\nimport { Constructor } from \"./constructor\";\n\nexport declare class ProviderInterface {\n  provideInstance: (key: any, instance: any) => void;\n}\n\nexport const Provider = <T extends Constructor<LitElement>>(superClass: T) => {\n  class ProviderClass extends superClass {\n    _instances = new Map<string, any>();\n    \n    connectedCallback(): void {\n      super.connectedCallback();\n      this.addRequestInstanceListener();\n    }\n    \n    private addRequestInstanceListener() {\n      this.addEventListener('request-instance', (event: any) => {\n        const key = event.detail.key;\n        if (this._instances.has(key)) {\n          event.detail.instance = this._instances.get(key);\n          event.stopPropagation();\n        }\n      });\n    }\n    \n    provideInstance(key: string, instance: any) {\n      this._instances.set(key, instance);\n    }\n  };\n  \n  return ProviderClass as Constructor<ProviderInterface> & T;\n}"]}