{"version":3,"file":"service-creator.js","sourceRoot":"","sources":["../../../src/service-manager/service-creator.ts"],"names":[],"mappings":"AAIA,MAAM,CAAC,MAAM,cAAc,GAAG,CAAoC,UAAa,EAAE,EAAE;IACjF,MAAM,aAAc,SAAQ,UAAU;QAGpC,YAAY,GAAG,IAAW;YACxB,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAHT,eAAU,GAAG,IAAI,GAAG,EAAe,CAAC;YAI1C,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC/B,CAAC;QAEM,aAAa,CAAC,GAAW,EAAE,QAAa;YAC7C,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;QACrC,CAAC;QAEO,qBAAqB;YAC3B,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,KAAU,EAAE,EAAE;gBAClD,MAAM,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC;gBAC7B,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;oBAC5B,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACjD,KAAK,CAAC,eAAe,EAAE,CAAC;iBACzB;YACH,CAAC,CAAC,CAAC;QACL,CAAC;KACF;IAAA,CAAC;IAEF,OAAO,aAAiD,CAAC;AAC3D,CAAC,CAAA","sourcesContent":["import { LitElement } from \"lit\";\nimport { Constructor } from \"./constructor\";\nimport { IServiceCreator } from \"./service-creator.interface\";\n\nexport const ServiceCreator = <T extends Constructor<LitElement>>(superClass: T) => {\n  class ProviderClass extends superClass {\n    private _instances = new Map<string, any>();\n    \n    constructor(...args: any[]) {\n      super(args[0]);\n      this.addGetServiceListener();\n    }\n\n    public createService(key: string, instance: any) {\n      this._instances.set(key, instance);\n    }\n    \n    private addGetServiceListener() {\n      this.addEventListener('get-service', (event: any) => {\n        const key = event.detail.key;\n        if (this._instances.has(key)) {\n          event.detail.instance = this._instances.get(key);\n          event.stopPropagation();\n        }\n      });\n    }\n  };\n  \n  return ProviderClass as Constructor<IServiceCreator> & T;\n}"]}